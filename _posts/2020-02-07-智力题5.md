---
layout:     post
title:      算法
subtitle:   智力题 1不知多少元素的链表随机获取元素 2 查到第一个坏人的死掉的好人的期望
date:       2020-02-07
author:     WY
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 概率
    - 算法
    - 依图
---

<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

有一个一次只能读取buffer，不知道多少元素的链表，现在基于这个链表与这个buffer实现获取一个链表中随机元素的函数

- 思路 每次读取一个元素，保证每个元素的值在buffer的概率相等即可
- 以[1,2,3]为例子，第一次独到的是1，buffer里面放的就是1，这时候取1的概率是100%
- 读入2以后，为了保证1，2在buffer的概率保持相等，那么1可以以50%的概率丢弃，读取3的时候，为了保证1，2，3概率相同，已知1，2获取概率为1/2.为了让他们变成1/3,只要buffer 以2/3的概率保持不变就行
依旧是 1/3的概率丢掉某一个， ##也就是大名鼎鼎的随机采样-蓄水池算法##

```
def getrandomlist(head):
    cnt = 0
    PH = head
    while PH:
        if random.randint(0,cnt)==0:
            ans = head.val
        head = head.next
        cnt+=1
    return ans


```

2 有n个人，m个坏人，每次检查一个人无论好坏，都会导致这个人死亡，那么检查到第一个坏人的死掉的好人的期望是
E(n,m) = $\frac{m}{n}$*0 + $\frac{n-m}{n}$]*E(n-1,m)+1]

: K 个坏人的话
个人推断是 E(n,m,k) = $\frac{m}{n}*E(n,m,k-1)$ + $(\frac{n-m}{n})*[E(n-1,m,k)+1]$